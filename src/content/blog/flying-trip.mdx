---
title: 'Like a bird'
description: 'Advanced camera animation in maplibre gl'
pubDate: 'Oct 28 2023'
heroImage: '/blog/flying-trip/trip.gif'
---

<p class="text-justify">In current episode I'm going to continue to talk about maplibre and its features, also some new terms will be introduced. 
One more thing - you'll know what tram you should take to get to my neighborhood if you ever visit my city ü§£.
As always, I am a supporter of practice over theory, so you can expect interesting examples. </p>

<p class="text-justify">If you have read my series titled <i class="text-[var(--accent)]">[Build you own planet with OSM](/blog/osm-intro-vol-1/)</i> you should now already that vector tiles are 
core element for building modern web maps. But of course, there are several other ways to add data to the map. I'd like to discuss one of them with you - GeoJSON.
GeoJSON, based on the JSON format, allows for a straightforward representation of geographic features along with their non-spatial attributes. Its undeniable 
advantage is simplicity, readability, and ease of transfer between different environments. Following geometries can be described via GeoJSON: points, line strings, polygons and multi-part 
collections of these types. Example file including abovementiones geometries you can find below:</p>

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [1.0, 2.0]
      },
      "properties": {
        "name": "bus stop"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [1.0, 0.0],
          [2.3, 1.0],
          [3.4, -1.0],
          [4.0, -2.0]
        ]
      },
      "properties": {
        "traffic": 0.87
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [10.0, 0.0],
            [11.0, 0.0],
            [11.0, 1.0],
            [10.0, 1.0],
            [10.0, 0.0]
          ]
        ]
      },
      "properties": {
        "name": "Neverland",
        "population": 100000
      }
    }
  ]
}
```
<p class="text-justify">To understand multi-part geometries you should visit [wikipedia](https://en.wikipedia.org/wiki/GeoJSON#Geometries), but basically it's 
nothing more like combining independent parts into single feature. Practical example of GeoJSON ? This is <i class="text-[var(--accent)]">[public transportation page](https://www.zditm.szczecin.pl/pl)</i> in my city. 
Next to timetables they expose map view for each bus/tram line. Tram number 8 is the most commonly used means of public transportation for me. Its timetable can be found <i class="text-[var(--accent)]">[here](https://www.zditm.szczecin.pl/pl/pasazer/rozklady-jazdy/linia/8/8)</i> 
and map view <i class="text-[var(--accent)]">[here](https://www.zditm.szczecin.pl/pl/mapy/linia/8/8)</i>. A little bit of sniffing in chrome developer console 
and we can see that they use GeoJSON for drawing route on a map. For reason I don't understand now üòÖ we have to use POST method for calling their API. Let's use curl then.</p>
```sh
‚ùØ curl -X POST https://www.zditm.szczecin.pl/pl/passenger/maps/trajectories/8 -o tram8.json
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 84751  100 84751    0     0   417k      0 --:--:-- --:--:-- --:--:--  424k
```
<p class="text-justify">They've used `LineString` to describe tram route, which seems to be a good choice. Additionally I can see defined 2 properties, which are: <i>route_variant_number</i> and <i>route_variant_type</i>.
For now its purpose is unknown for me. I'm keeping file for later use.</p>

Because we are talking about my home city (Szczecin), we should prepare vector tiles for it. At this point I 

PMTiles is a single-file archive format for pyramids of tiled data. A PMTiles archive can be hosted on a storage platform like S3, and enables low-cost, zero-maintenance map applications.

import FlyingTrip from '../../components/blog-samples/FlyingTrip.jsx';

<div class="w-100 h-[400px]">
    <FlyingTrip client:only="react"  />
</div>


Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi diam orci, dictum sed sapien id, ultricies dictum libero. 
Etiam eget mauris purus. Quisque vitae libero sit amet libero vehicula porta. Duis interdum risus nec eleifend iaculis. 
Nullam convallis sed purus mattis dignissim. Donec est augue, porttitor vel est eget, convallis rhoncus diam. Proin dapibus, 
diam vestibulum rutrum mollis, neque purus tempus risus, bibendum dignissim eros libero non neque. Praesent quis dapibus est. 
Nulla commodo ipsum ac dolor tincidunt aliquam. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. 
Aenean sed justo gravida, laoreet risus vitae, pharetra lectus. Nunc nec aliquam nisl. Aliquam vitae neque ex.
